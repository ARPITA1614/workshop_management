<% if notice %>
  <div class="alert alert-success text-center mt-3">
    <%= notice %>
  </div>
<% end %>

<% if alert %>
  <div class="alert alert-danger text-center mt-3">
    <%= alert %>
  </div>
<% end %>

<div class="row">

  <!-- LEFT SIDE - WORKSHOP DETAILS -->
  <div class="col-lg-8 mt-4">
    <div class="card shadow mb-3 mt-3">
      <div class="card-body">
        <h4 class="card-title"><%= @workshop.name %></h4>

        <div class="row mt-3">
          <div class="col-lg-7">
            <h5>
              <span class="badge bg-primary">
                Total Duration: <%= @workshop.total_duration %>
              </span>
            </h5>
            <h5 class="mt-2">
              <span class="badge bg-primary">
                Daily Duration: <%= @workshop.daily_duration %>
              </span>
            </h5>
          </div>

          <div class="col-lg-5">
            <h5>
              Total Seats:
              <span class="badge bg-success">
                <%= @workshop.total_sits %>
              </span>
            </h5>

            <h5 class="mt-2">
              Remaining Seats:
              <span class="badge bg-warning text-dark">
                <%= @workshop.remaining_sits %>
              </span>
            </h5>

            <h5 class="mt-2">
              Registration Fee:
              <span class="badge bg-info text-dark">
                â‚¹ <%= @workshop.registration_fee %>
              </span>
            </h5>
          </div>
        </div>

        <p class="lead mt-3 mb-3">
          <%= @workshop.description %>
        </p>

        <%= link_to "Back to Workshops",
                    workshops_path,
                    class: "btn btn-outline-danger btn-lg mt-3" %>
      </div>
    </div>
  </div>


  <!-- RIGHT SIDE - BOOKING FORM -->
  <div class="col-lg-4 mt-4">
    <div class="card shadow mb-3 mt-3">
      <div class="card-body">

        <h4 class="card-title mb-3">
          Reserve Your Seats Now !!!
        </h4>

        <% if @workshop.remaining_sits > 0 %>

          <%= form_with url: bookings_path,
                        method: :post,
                        data: { turbo: false } do |form| %>

            <%= form.hidden_field :workshop_id,
                                  value: @workshop.id %>

            <div class="form-group mb-3">
              <%= form.label :full_name %>
              <%= form.text_field :full_name,
                                  class: "form-control",
                                  required: true %>
            </div>

            <div class="form-group mb-3">
              <%= form.label :email %>
              <%= form.email_field :email,
                                   class: "form-control",
                                   required: true %>
            </div>

            <div class="form-group mb-3">
              <%= form.label :contact_number %>
              <%= form.text_field :contact_number,
                                  class: "form-control",
                                  required: true %>
            </div>

            <div class="form-group mb-3">
              <%= form.label :no_of_tickets,
                             "Number of Seats" %>
              <%= form.number_field :no_of_tickets,
                                    class: "form-control",
                                    required: true,
                                    min: 1,
                                    max: @workshop.remaining_sits %>
            </div>

            <div class="d-grid gap-2">
              <%= form.submit "Proceed to Payment",
                              class: "btn btn-danger btn-lg mt-3" %>
            </div>

          <% end %>

        <% else %>

          <div class="alert alert-danger text-center">
            Seats are fully booked!
          </div>

        <% end %>

      </div>
    </div>
  </div>

</div>